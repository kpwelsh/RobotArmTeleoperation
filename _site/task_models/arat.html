<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>ARAT - Robot Teleoperation Platform</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>ARAT | Robot Teleoperation Platform</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="ARAT" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/task_models/arat.html" /> <meta property="og:url" content="http://localhost:4000/task_models/arat.html" /> <meta property="og:site_name" content="Robot Teleoperation Platform" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="ARAT" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","headline":"ARAT","url":"http://localhost:4000/task_models/arat.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> Robot Teleoperation Platform </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Overview</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/task_models/" class="nav-list-link">Task Models</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/task_models/robot_models.html" class="nav-list-link">Robot Arms</a></li><li class="nav-list-item "><a href="http://localhost:4000/task_models/tracing.html" class="nav-list-link">Tracing</a></li><li class="nav-list-item "><a href="http://localhost:4000/task_models/box_and_block.html" class="nav-list-link">Box and Block</a></li><li class="nav-list-item active"><a href="http://localhost:4000/task_models/arat.html" class="nav-list-link active">ARAT</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/behind_the_scenes/" class="nav-list-link">Behind the Scenes</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/behind_the_scenes/installation.html" class="nav-list-link">Installation</a></li><li class="nav-list-item "><a href="http://localhost:4000/behind_the_scenes/build_settings.html" class="nav-list-link">Build Settings</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/behind_the_scenes/components/" class="nav-list-link">Components</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/behind_the_scenes/components/end_effectors.html" class="nav-list-link">End Effectors</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/behind_the_scenes/components/feedback_devices.html" class="nav-list-link">Feedback Devices</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/behind_the_scenes/components/ik_plugins.html" class="nav-list-link">IK Plugins</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/behind_the_scenes/components/input_devices.html" class="nav-list-link">Input Devices</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/behind_the_scenes/components/inspection_camera.html" class="nav-list-link">Inspection Camera</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/behind_the_scenes/components/surface_painting.html" class="nav-list-link">Painting</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/behind_the_scenes/components/rectangle_packing.html" class="nav-list-link">Rectangle Packing</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/behind_the_scenes/components/sticky_gripper.html" class="nav-list-link">Sticky Gripper</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/behind_the_scenes/components/tracker.html" class="nav-list-link">Tracker</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/behind_the_scenes/modified_components/" class="nav-list-link">Modified Components</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/behind_the_scenes/modified_components/urdf_importer.html" class="nav-list-link">URDF Importer</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/modification_workflow/" class="nav-list-link">Modification Workflow</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/modification_workflow/new_robot.html" class="nav-list-link">New Robot</a></li><li class="nav-list-item "><a href="http://localhost:4000/modification_workflow/new_task.html" class="nav-list-link">New Task</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Robot Teleoperation Platform" aria-label="Search Robot Teleoperation Platform" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/task_models/">Task Models</a></li> <li class="breadcrumb-nav-list-item"><span>ARAT</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="action-research-arm-test"> <a href="#action-research-arm-test" class="anchor-heading" aria-labelledby="action-research-arm-test"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Action Research Arm Test </h1> <p>In addition to the tests that cover specific manipulation modalities, the Action Research Arm Test (ARAT) was included to cover a wide range of general manipulation skills. This test was designed for use with patients with stroke, brain injury, multiple sclerosis, and Parkinson’s disease and asks subjects to go through a range of manipulations including placing a ball on a dimpled platform, stacking rectangular blocks on a shelf, sliding cylinders onto small posts, and poring liquid from one cup to another. When performed with human hands, the test includes a few other similar tasks, which were cut from this implementation because the size of the robot end-effectors and each arm’s kinematic workspace require the tasks to be spaced somewhat less densely. The figure below shows the configuration of the task in this simulation. This task is evaluated on a somewhat subjective rating scale for each sub-task. On each sub-task, the user scores 0 points if there is no movement, 1 point if the task is partially complete, 2 points if the task is completed but takes abnormally long time, and a maximum of 3 points if the task is performed normally. Crucially, the definition of this scoring system is relative to a typically functioning adult. Instead of this rating scale, each sub-task was given its own objective measure. For most sub-tasks, this is a binary value representing whether or not it was completed. For some, like the poring task, the number of completed components are counted and used as a fractional score.</p> <p><img src="/assets/imgs/ARAT.png" alt="ARAT" /></p> <h1 id="technical-details"> <a href="#technical-details" class="anchor-heading" aria-labelledby="technical-details"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Technical Details </h1> <p>The ARAT is implemented in the <code class="language-plaintext highlighter-rouge">ComplexDexterity</code> class, and makes use of the <code class="language-plaintext highlighter-rouge">ContainerCounter</code>, <code class="language-plaintext highlighter-rouge">PoseMatcher</code>, and the <code class="language-plaintext highlighter-rouge">CompletelyContainedColliderTracker</code> components.</p> <h2 id="posematcher"> <a href="#posematcher" class="anchor-heading" aria-labelledby="posematcher"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">PoseMatcher</code> </h2> <p>This component offers a convenient way for task designers specify a pose matching task in the Unity Editor. It exposes a few editor buttons that allow the designer to set the desired pose by moving the object instead of typing in numbers by hand. Additionally, it affords an error tolerance threshold for both rotation and translation.</p> <p><img src="/assets/imgs/2022-05-13-18-13-02.png" alt="Pose Matcher" /></p> <p>To use this component, simply attach it to a game object, position it where you want it to start, hit the “Set Start Pose” button to save the current pose, position it where you want it to be placed by the user, hit the “Set Goal Pose” button (or alternatively edit the target pose properties directly), and then hit the “Reset Pose” button to set the object back to the start pose.</p> <h2 id="collidertracker"> <a href="#collidertracker" class="anchor-heading" aria-labelledby="collidertracker"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">ColliderTracker</code> </h2> <p>Unity supports <a href="https://docs.unity3d.com/Manual/CollidersOverview.html">Trigger Colliders</a>, which expose the event handling typically offered by a physics simulation without actually influencing the physics. This can be very useful for detecting if certain kinds of objects are present in a region and is used by the <code class="language-plaintext highlighter-rouge">StickyGripper</code> class to detect grabable things. In this case, the <code class="language-plaintext highlighter-rouge">ColliderTracker</code> exposes an interface keeping track of which colliders intersect and subsequently filtering them down to meet certain criteria. This is used as the base class for the following two components, both of which are implemented by adding their own filter criteria on top of the options of the <code class="language-plaintext highlighter-rouge">ColliderTracker</code>.</p> <h2 id="completelycontainedcollidertracker"> <a href="#completelycontainedcollidertracker" class="anchor-heading" aria-labelledby="completelycontainedcollidertracker"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">CompletelyContainedColliderTracker</code> </h2> <p>This component applies an additional filter on top of whether or not a collider <em>intersects</em> with the detection area. If both the detection area and the detected collider are <code class="language-plaintext highlighter-rouge">BoxCollider</code>s, this component additionally checks whether or not the box is completely contained within the detection area. In the ARAT simulation, this is used to determine if the blocks are stacked on the shelves or not.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: center"><img src="/assets/imgs/ShelfBox.png" alt="Shelf Stacking" /></th> </tr> </thead> <tbody> <tr> <td style="text-align: center">Shelf stacking area. The green rectangle boxes need to be placed on the center shelf. The wireframe box shown here (not visible during operation) represents the detection area that the blocks need to be contained within to count.</td> </tr> </tbody> </table></div> <h3 id="containercounter"> <a href="#containercounter" class="anchor-heading" aria-labelledby="containercounter"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">ContainerCounter</code><sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup> </h3> <p>In addition to testing for convex objects within a another convex object, it can be useful to test whether or not a convex object is contained within a convex hull induced by the empty space in a concave object. Specifically, this is used for counting the number of balls inside of a cup. While this is somewhat complex in general, this implementation was simplified through several assumptions. Firstly that both the object being checked for containment and the bounds of the container are solid physical objects that do not intersect. Secondly, that the container is a concave object that can be made convex through the addition of a single convex shape (i.e. there is only one <em>interior</em> of the container and it is convex). And lastly that it is acceptable to give a non-deterministic answer if the object is partially contained (this limitation can be mitigated by combining the result with the use of other containment checks).</p> <p>With these assumptions, the algorithm is straightforward. Given a container and an object, we choose a point inside of the container and a point inside of the object. Then, we simply cast a ray from one to the other. If the ray intersects with our container, the object is guaranteed to be not contained. Similarly, if the object is completely contained, the ray is guaranteed to not intersect with the container. However, if the ray does not intersect with the container, it is possible that another choice of points cause an intersection. As such, this algorithm has a false positive rate if the object is partially contained.</p> <p>The <code class="language-plaintext highlighter-rouge">Count</code> function performs two checks. Firstly that the collider in question intersects with all of the specified containment regions. In the case of the cup, this is a single cylinder. This check is needed to bound the convex interior of the cup.</p> <figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="n">HashSet</span><span class="p">&lt;</span><span class="n">Collider</span><span class="p">&gt;</span> <span class="n">colliders</span> <span class="p">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="p">&lt;</span><span class="n">Collider</span><span class="p">&gt;(</span><span class="n">Boundaries</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Colliders</span><span class="p">);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">boundary</span> <span class="k">in</span> <span class="n">Boundaries</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">colliders</span><span class="p">.</span><span class="nf">IntersectWith</span><span class="p">(</span><span class="n">boundary</span><span class="p">.</span><span class="n">Colliders</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure> <p>Secondly, it casts a ray from a point in the interior of the cup to a point in the interior of the detected collider. In doing so, it checks if the ray intersects with the cup model. If it does, then the detected collider is certainly not contained in the cup. If it does not, then the detected collider <em>may</em> be contained in the cup in general, and <em>is</em> contained given the previous assumptions.</p> <figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">collider</span> <span class="k">in</span> <span class="n">colliders</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(!</span><span class="nf">filter</span><span class="p">(</span><span class="n">collider</span><span class="p">))</span>
        <span class="k">continue</span><span class="p">;</span>

    <span class="n">Ray</span> <span class="n">ray</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Ray</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">collider</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
    <span class="n">List</span><span class="p">&lt;</span><span class="n">RaycastHit</span><span class="p">&gt;</span> <span class="n">hits</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">RaycastHit</span><span class="p">&gt;();</span>

    <span class="c1">// Assuming that the origin of the transform is within the collider</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">hit</span> <span class="k">in</span> <span class="n">Physics</span><span class="p">.</span><span class="nf">RaycastAll</span><span class="p">(</span><span class="n">ray</span><span class="p">,</span> <span class="p">(</span><span class="n">collider</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">-</span> <span class="n">origin</span><span class="p">).</span><span class="n">magnitude</span><span class="p">))</span> <span class="p">{</span>

        <span class="c1">// If we hit ourself, then we are done looking.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">hit</span><span class="p">.</span><span class="n">collider</span><span class="p">.</span><span class="n">gameObject</span><span class="p">.</span><span class="nf">HasParent</span><span class="p">(</span><span class="n">gameObject</span><span class="p">))</span>
            <span class="k">break</span><span class="p">;</span>
        
        <span class="c1">// Otherwise, if we hit the collider we are looking for, then we count it as inside.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">hit</span><span class="p">.</span><span class="n">collider</span> <span class="p">==</span> <span class="n">collider</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">count</span><span class="p">++;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1" role="doc-endnote"> <p>The current design of the cup model allows this to be solved much more simply by doing a cylinder containment check. However, this was not the case with previous cup models, and this section is written with general models in mind. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> </ol> </div> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
